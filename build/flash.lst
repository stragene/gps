ARM GAS  C:\Users\strag\AppData\Local\Temp\cc8o8xka.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"flash.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.vInnerFlash_Init,"ax",%progbits
  22              		.align	2
  23              		.global	vInnerFlash_Init
  24              		.thumb
  25              		.thumb_func
  27              	vInnerFlash_Init:
  28              	.LFB111:
  29              		.file 1 "./user/source/flash.c"
   1:./user/source/flash.c **** #include "flash.h"
   2:./user/source/flash.c **** 
   3:./user/source/flash.c **** 
   4:./user/source/flash.c **** 
   5:./user/source/flash.c **** /********************************************************************
   6:./user/source/flash.c **** * 功    能：flash初始化
   7:./user/source/flash.c **** * 输    入：none
   8:./user/source/flash.c **** * 输    出：	none
   9:./user/source/flash.c **** * 编 写 人：stragen
  10:./user/source/flash.c **** * 编写日期：2016.6.23
  11:./user/source/flash.c **** **********************************************************************/
  12:./user/source/flash.c **** void vInnerFlash_Init(void)
  13:./user/source/flash.c **** {
  30              		.loc 1 13 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  14:./user/source/flash.c **** 
  15:./user/source/flash.c **** 	FLASH_SetLatency(FLASH_Latency_2);  //设置写延时
  39              		.loc 1 15 0
  40 0002 0220     		movs	r0, #2
  41 0004 FFF7FEFF 		bl	FLASH_SetLatency
  42              	.LVL0:
  16:./user/source/flash.c **** 	FLASH_ClearFlag(FLASH_FLAG_EOP| FLASH_FLAG_PGERR |FLASH_FLAG_WRPERR);  //清除标志位
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc8o8xka.s 			page 2


  43              		.loc 1 16 0
  44 0008 3420     		movs	r0, #52
  45 000a FFF7FEFF 		bl	FLASH_ClearFlag
  46              	.LVL1:
  47 000e 08BD     		pop	{r3, pc}
  48              		.cfi_endproc
  49              	.LFE111:
  51              		.section	.text.EEProm_Write,"ax",%progbits
  52              		.align	2
  53              		.global	EEProm_Write
  54              		.thumb
  55              		.thumb_func
  57              	EEProm_Write:
  58              	.LFB112:
  17:./user/source/flash.c **** 	
  18:./user/source/flash.c **** }
  19:./user/source/flash.c **** 
  20:./user/source/flash.c **** /********************************************************************
  21:./user/source/flash.c **** * 功    能： 向EEPROM写两字节
  22:./user/source/flash.c **** * 输    入： EEPROM的一个存储地址，双字对齐
  23:./user/source/flash.c **** * 输    出：	none
  24:./user/source/flash.c **** * 编 写 人：stragen
  25:./user/source/flash.c **** * 编写日期：2016.6.23
  26:./user/source/flash.c **** **********************************************************************/
  27:./user/source/flash.c **** void EEProm_Write(uint32_t addr,uint8_t ByteData)
  28:./user/source/flash.c **** {
  59              		.loc 1 28 0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63              	.LVL2:
  64 0000 38B5     		push	{r3, r4, r5, lr}
  65              	.LCFI1:
  66              		.cfi_def_cfa_offset 16
  67              		.cfi_offset 3, -16
  68              		.cfi_offset 4, -12
  69              		.cfi_offset 5, -8
  70              		.cfi_offset 14, -4
  71 0002 0546     		mov	r5, r0
  72 0004 0C46     		mov	r4, r1
  29:./user/source/flash.c **** 	FLASH_Unlock(); //解锁写保护
  73              		.loc 1 29 0
  74 0006 FFF7FEFF 		bl	FLASH_Unlock
  75              	.LVL3:
  30:./user/source/flash.c **** 	FLASH_ProgramHalfWord(addr, (uint16_t)ByteData);
  76              		.loc 1 30 0
  77 000a 2146     		mov	r1, r4
  78 000c 2846     		mov	r0, r5
  79 000e FFF7FEFF 		bl	FLASH_ProgramHalfWord
  80              	.LVL4:
  31:./user/source/flash.c **** 	FLASH_Lock();
  81              		.loc 1 31 0
  82 0012 FFF7FEFF 		bl	FLASH_Lock
  83              	.LVL5:
  32:./user/source/flash.c **** 	if( *(__IO uint32_t *)addr != (uint16_t)ByteData)
  84              		.loc 1 32 0
  85 0016 2B68     		ldr	r3, [r5]
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc8o8xka.s 			page 3


  86 0018 A342     		cmp	r3, r4
  87 001a 00D0     		beq	.L3
  88              	.L5:
  89 001c FEE7     		b	.L5
  90              	.L3:
  91 001e 38BD     		pop	{r3, r4, r5, pc}
  92              		.cfi_endproc
  93              	.LFE112:
  95              		.section	.text.EEProm_Read,"ax",%progbits
  96              		.align	2
  97              		.global	EEProm_Read
  98              		.thumb
  99              		.thumb_func
 101              	EEProm_Read:
 102              	.LFB113:
  33:./user/source/flash.c **** 		{
  34:./user/source/flash.c **** 			while(1);//写flash失败
  35:./user/source/flash.c **** 		}
  36:./user/source/flash.c **** }
  37:./user/source/flash.c **** 
  38:./user/source/flash.c **** /********************************************************************
  39:./user/source/flash.c **** * 功    能： 从EEPROM的一个地址上读两个字节
  40:./user/source/flash.c **** * 输    入： EEPROM的一个存储地址，双字对齐
  41:./user/source/flash.c **** * 输    出：	none
  42:./user/source/flash.c **** * 编 写 人：stragen
  43:./user/source/flash.c **** * 编写日期：2016.6.23
  44:./user/source/flash.c **** **********************************************************************/
  45:./user/source/flash.c ****  uint8_t EEProm_Read(uint32_t addr)
  46:./user/source/flash.c **** {
 103              		.loc 1 46 0
 104              		.cfi_startproc
 105              		@ args = 0, pretend = 0, frame = 0
 106              		@ frame_needed = 0, uses_anonymous_args = 0
 107              		@ link register save eliminated.
 108              	.LVL6:
  47:./user/source/flash.c **** 	  uint8_t ReadByte;
  48:./user/source/flash.c **** 		ReadByte=(uint16_t) *(__IO uint32_t *)addr;
 109              		.loc 1 48 0
 110 0000 0068     		ldr	r0, [r0]
 111              	.LVL7:
  49:./user/source/flash.c **** 		return ReadByte;
  50:./user/source/flash.c **** }
 112              		.loc 1 50 0
 113 0002 C0B2     		uxtb	r0, r0
 114 0004 7047     		bx	lr
 115              		.cfi_endproc
 116              	.LFE113:
 118 0006 00BF     		.text
 119              	.Letext0:
 120              		.file 2 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\machine\\_defaul
 121              		.file 3 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\sys\\_stdint.h"
 122              		.file 4 "stdperiph/include/stm32f37x_flash.h"
 123              		.file 5 "cmsis/include/core_cm4.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\cc8o8xka.s 			page 4


DEFINED SYMBOLS
                            *ABS*:00000000 flash.c
C:\Users\strag\AppData\Local\Temp\cc8o8xka.s:22     .text.vInnerFlash_Init:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc8o8xka.s:27     .text.vInnerFlash_Init:00000000 vInnerFlash_Init
C:\Users\strag\AppData\Local\Temp\cc8o8xka.s:52     .text.EEProm_Write:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc8o8xka.s:57     .text.EEProm_Write:00000000 EEProm_Write
C:\Users\strag\AppData\Local\Temp\cc8o8xka.s:96     .text.EEProm_Read:00000000 $t
C:\Users\strag\AppData\Local\Temp\cc8o8xka.s:101    .text.EEProm_Read:00000000 EEProm_Read
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
FLASH_SetLatency
FLASH_ClearFlag
FLASH_Unlock
FLASH_ProgramHalfWord
FLASH_Lock
