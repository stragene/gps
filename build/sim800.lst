ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 1
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.syntax unified
  17              		.file	"sim800.c"
  18              		.text
  19              	.Ltext0:
  20              		.cfi_sections	.debug_frame
  21              		.section	.text.vSysTickInit,"ax",%progbits
  22              		.align	2
  23              		.thumb
  24              		.thumb_func
  26              	vSysTickInit:
  27              	.LFB121:
  28              		.file 1 "./user/source/sim800.c"
   1:./user/source/sim800.c **** #include <string.h>
   2:./user/source/sim800.c **** #include "stm32f37x.h"
   3:./user/source/sim800.c **** #include "sim800.h"
   4:./user/source/sim800.c **** #include "uart.h"
   5:./user/source/sim800.c **** #include "FreeRTOS.h"
   6:./user/source/sim800.c **** #include "task.h"
   7:./user/source/sim800.c **** 
   8:./user/source/sim800.c **** struct gprs_dev Sim800GPRS;
   9:./user/source/sim800.c **** struct gprs_dev *pSim800GPRS = &Sim800GPRS;
  10:./user/source/sim800.c **** static void vSysTickInit(void);
  11:./user/source/sim800.c **** static void vDelay(uint32_t ticks);
  12:./user/source/sim800.c **** static void vSim800_HardInit(void);
  13:./user/source/sim800.c **** static void vSim800_pEn(void);
  14:./user/source/sim800.c **** static void vSim800_PDen(void);
  15:./user/source/sim800.c **** static void vSim800_OnOff(void);
  16:./user/source/sim800.c **** static bool blSim800SendCmd(char *pcmd, char *response, uint32_t timeout, uint32_t retry);
  17:./user/source/sim800.c **** static uint32_t dwSim800SendData(uint8_t *pbuf, uint32_t len, uint32_t timeout);
  18:./user/source/sim800.c **** static void vSim800AutoReadEn(void);
  19:./user/source/sim800.c **** static uint32_t Sim800Read(uint8_t *buf, uint32_t count);
  20:./user/source/sim800.c **** 
  21:./user/source/sim800.c **** /********************************************************************
  22:./user/source/sim800.c **** * 功    能：SIM800初始化
  23:./user/source/sim800.c **** * 输    入：none
  24:./user/source/sim800.c **** * 输    出：none
  25:./user/source/sim800.c **** * 编 写 人：stragen
  26:./user/source/sim800.c **** * 编写日期：2018.3.27
  27:./user/source/sim800.c **** **********************************************************************/
  28:./user/source/sim800.c **** void vSim800_HardInit(void)
  29:./user/source/sim800.c **** {
  30:./user/source/sim800.c ****     GPIO_InitTypeDef GPIO_Initstruc;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 2


  31:./user/source/sim800.c ****     USART_InitTypeDef USART_Initstruc;
  32:./user/source/sim800.c ****     NVIC_InitTypeDef NVIC_Initstruc;
  33:./user/source/sim800.c ****     //A1配置为GPRS电源使能,A3配置为GPRS开关机
  34:./user/source/sim800.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOA, ENABLE);
  35:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_3;
  36:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Mode = GPIO_Mode_OUT;
  37:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_OType = GPIO_OType_PP; //开漏
  38:./user/source/sim800.c ****     //GPIO_Initstruc.GPIO_OType = GPIO_OType_OD; //开漏
  39:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Speed = GPIO_Speed_2MHz;
  40:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_NOPULL;
  41:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_1 | GPIO_Pin_3, Bit_RESET); //默认为低
  42:./user/source/sim800.c ****     GPIO_Init(GPIOA, &GPIO_Initstruc);
  43:./user/source/sim800.c ****     /*B8和B9配置为串口3,GPRS*/
  44:./user/source/sim800.c ****     GPIO_PinAFConfig(GPIOB, GPIO_PinSource8, GPIO_AF_7);
  45:./user/source/sim800.c ****     GPIO_PinAFConfig(GPIOB, GPIO_PinSource9, GPIO_AF_7);
  46:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Mode = GPIO_Mode_AF;
  47:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_OType = GPIO_OType_PP;
  48:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_UP;
  49:./user/source/sim800.c ****     //GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_NOPULL;
  50:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Speed = GPIO_Speed_10MHz;
  51:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9;
  52:./user/source/sim800.c ****     GPIO_Init(GPIOB, &GPIO_Initstruc);
  53:./user/source/sim800.c ****     /*串口初始化*/
  54:./user/source/sim800.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
  55:./user/source/sim800.c ****     USART_OverSampling8Cmd(USART3, ENABLE);
  56:./user/source/sim800.c ****     USART_Initstruc.USART_BaudRate = 115200;
  57:./user/source/sim800.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
  58:./user/source/sim800.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_8b;
  59:./user/source/sim800.c ****     USART_Initstruc.USART_Parity = USART_Parity_No;
  60:./user/source/sim800.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
  61:./user/source/sim800.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  62:./user/source/sim800.c ****     USART_Init(USART3, &USART_Initstruc);
  63:./user/source/sim800.c **** 
  64:./user/source/sim800.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART3_IRQn;
  65:./user/source/sim800.c ****     //NVIC_Initstruc.NVIC_IRQChannelPreemptionPriority = 0;
  66:./user/source/sim800.c ****     NVIC_Initstruc.NVIC_IRQChannelPreemptionPriority = configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY
  67:./user/source/sim800.c ****     //NVIC_Initstruc.NVIC_IRQChannelSubPriority = 0;
  68:./user/source/sim800.c ****     NVIC_Init(&NVIC_Initstruc);
  69:./user/source/sim800.c ****     USART_Cmd(USART3, ENABLE);
  70:./user/source/sim800.c **** 
  71:./user/source/sim800.c ****     vSysTickInit();
  72:./user/source/sim800.c **** }
  73:./user/source/sim800.c **** /********************************************************************
  74:./user/source/sim800.c **** * 功    能：Sim800_GPRS Init
  75:./user/source/sim800.c **** * 输    入：none
  76:./user/source/sim800.c **** * 输    出：none
  77:./user/source/sim800.c **** * 编 写 人：stragen
  78:./user/source/sim800.c **** * 编写日期：
  79:./user/source/sim800.c **** **********************************************************************/
  80:./user/source/sim800.c **** void vSim800GPRSInit(struct gprs_dev *pGPRS)
  81:./user/source/sim800.c **** {
  82:./user/source/sim800.c ****     vSim800_HardInit();
  83:./user/source/sim800.c ****     pGPRS->Interface = pUartGPRS;
  84:./user/source/sim800.c ****     //pGPRS->Init = vSim800_HardInit;
  85:./user/source/sim800.c ****     pGPRS->PowerEn = vSim800_pEn;
  86:./user/source/sim800.c ****     pGPRS->PowerDen = vSim800_PDen;
  87:./user/source/sim800.c ****     pGPRS->OnOff = vSim800_OnOff;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 3


  88:./user/source/sim800.c ****     pGPRS->SendCmd = blSim800SendCmd;
  89:./user/source/sim800.c ****     pGPRS->SendData = dwSim800SendData;
  90:./user/source/sim800.c ****     pGPRS->AutoReadEn = vSim800AutoReadEn;
  91:./user/source/sim800.c ****     pGPRS->Read = Sim800Read;
  92:./user/source/sim800.c ****     pGPRS->delay = vDelay;
  93:./user/source/sim800.c **** }
  94:./user/source/sim800.c **** void vSim800_OnOff(void)
  95:./user/source/sim800.c **** {
  96:./user/source/sim800.c ****     /*引脚拉高*/
  97:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_RESET);
  98:./user/source/sim800.c ****     vDelay(TICKS_500MS);
  99:./user/source/sim800.c ****     /*引脚拉低*/
 100:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_SET);
 101:./user/source/sim800.c ****     /*延时1秒*/
 102:./user/source/sim800.c ****     vDelay(TICKS_1S);
 103:./user/source/sim800.c ****     /*引脚拉高*/
 104:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_RESET);
 105:./user/source/sim800.c **** }
 106:./user/source/sim800.c **** 
 107:./user/source/sim800.c **** /****im***************************************************************
 108:./user/source/sim800.c **** * 功    能：Sim800 Power enable
 109:./user/source/sim800.c **** * 输    入：none
 110:./user/source/sim800.c **** * 输    出：none
 111:./user/source/sim800.c **** * 编 写 人：stragen
 112:./user/source/sim800.c **** * 编写日期：
 113:./user/source/sim800.c **** **********************************************************************/
 114:./user/source/sim800.c **** void vSim800_pEn(void)
 115:./user/source/sim800.c **** {
 116:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_1, Bit_SET);
 117:./user/source/sim800.c **** }
 118:./user/source/sim800.c **** /********************************************************************
 119:./user/source/sim800.c **** * 功    能：Sim800 Power Disable
 120:./user/source/sim800.c **** * 输    入：none
 121:./user/source/sim800.c **** * 输    出：none
 122:./user/source/sim800.c **** * 编 写 人：stragen
 123:./user/source/sim800.c **** * 编写日期：
 124:./user/source/sim800.c **** **********************************************************************/
 125:./user/source/sim800.c **** void vSim800_PDen(void)
 126:./user/source/sim800.c **** {
 127:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_1, Bit_RESET);
 128:./user/source/sim800.c **** }
 129:./user/source/sim800.c **** 
 130:./user/source/sim800.c **** /********************************************************************
 131:./user/source/sim800.c **** * 功    能：Enable  Systick , no interrupt
 132:./user/source/sim800.c **** * 输    入：none
 133:./user/source/sim800.c **** * 输    出：none
 134:./user/source/sim800.c **** * 编 写 人：stragen
 135:./user/source/sim800.c **** * 编写日期：
 136:./user/source/sim800.c **** **********************************************************************/
 137:./user/source/sim800.c **** void vSysTickInit(void)
 138:./user/source/sim800.c **** {
  29              		.loc 1 138 0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 139:./user/source/sim800.c ****     uint32_t ticks = SystemCoreClock / configTICK_RATE_HZ;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 4


  34              		.loc 1 139 0
  35 0000 074B     		ldr	r3, .L2
  36 0002 1B68     		ldr	r3, [r3]
  37 0004 074A     		ldr	r2, .L2+4
  38 0006 A2FB0323 		umull	r2, r3, r2, r3
  39              	.LVL0:
 140:./user/source/sim800.c ****     SysTick->LOAD = (ticks & SysTick_LOAD_RELOAD_Msk) - 1; /* set reload register */
  40              		.loc 1 140 0
  41 000a C3F3D703 		ubfx	r3, r3, #3, #24
  42              	.LVL1:
  43 000e 013B     		subs	r3, r3, #1
  44 0010 054A     		ldr	r2, .L2+8
  45 0012 5360     		str	r3, [r2, #4]
  46              	.LVL2:
 141:./user/source/sim800.c ****     //NVIC_SetPriority(SysTick_IRQn, (1 << __NVIC_PRIO_BITS) - 1); /* set Priority for Systick Inte
 142:./user/source/sim800.c ****     SysTick->VAL = 0; /* Load the SysTick Counter Value */
  47              		.loc 1 142 0
  48 0014 0023     		movs	r3, #0
  49 0016 9360     		str	r3, [r2, #8]
 143:./user/source/sim800.c ****     SysTick->CTRL = SysTick_CTRL_CLKSOURCE_Msk |
  50              		.loc 1 143 0
  51 0018 0523     		movs	r3, #5
  52 001a 1360     		str	r3, [r2]
  53 001c 7047     		bx	lr
  54              	.L3:
  55 001e 00BF     		.align	2
  56              	.L2:
  57 0020 00000000 		.word	SystemCoreClock
  58 0024 CDCCCCCC 		.word	-858993459
  59 0028 10E000E0 		.word	-536813552
  60              		.cfi_endproc
  61              	.LFE121:
  63              		.section	.text.vDelay,"ax",%progbits
  64              		.align	2
  65              		.thumb
  66              		.thumb_func
  68              	vDelay:
  69              	.LFB122:
 144:./user/source/sim800.c ****                     //SysTick_CTRL_TICKINT_Msk   |
 145:./user/source/sim800.c ****                     SysTick_CTRL_ENABLE_Msk; /* Enable SysTick IRQ and SysTick Timer */
 146:./user/source/sim800.c **** }
 147:./user/source/sim800.c **** 
 148:./user/source/sim800.c **** /********************************************************************
 149:./user/source/sim800.c **** * 功    能：delayms
 150:./user/source/sim800.c **** * 输    入：none
 151:./user/source/sim800.c **** * 输    出：none
 152:./user/source/sim800.c **** * 编 写 人：stragen
 153:./user/source/sim800.c **** * 编写日期：
 154:./user/source/sim800.c **** **********************************************************************/
 155:./user/source/sim800.c **** void vDelay(uint32_t ticks)
 156:./user/source/sim800.c **** {
  70              		.loc 1 156 0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 0
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  74              		@ link register save eliminated.
  75              	.LVL3:
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 5


 157:./user/source/sim800.c ****     if (ticks != 0xFFFFFFFF)
  76              		.loc 1 157 0
  77 0000 B0F1FF3F 		cmp	r0, #-1
  78 0004 07D0     		beq	.L7
 158:./user/source/sim800.c ****         ticks++;
  79              		.loc 1 158 0
  80 0006 0130     		adds	r0, r0, #1
  81              	.LVL4:
  82 0008 05E0     		b	.L7
  83              	.L8:
 159:./user/source/sim800.c ****     while (ticks)
 160:./user/source/sim800.c ****     {
 161:./user/source/sim800.c ****         if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
  84              		.loc 1 161 0
  85 000a 044B     		ldr	r3, .L9
  86 000c 1B68     		ldr	r3, [r3]
  87 000e 13F4803F 		tst	r3, #65536
  88 0012 00D0     		beq	.L7
 162:./user/source/sim800.c ****         {
 163:./user/source/sim800.c ****             ticks--;
  89              		.loc 1 163 0
  90 0014 0138     		subs	r0, r0, #1
  91              	.LVL5:
  92              	.L7:
 159:./user/source/sim800.c ****     while (ticks)
  93              		.loc 1 159 0
  94 0016 0028     		cmp	r0, #0
  95 0018 F7D1     		bne	.L8
 164:./user/source/sim800.c ****         }
 165:./user/source/sim800.c ****     }
 166:./user/source/sim800.c **** }
  96              		.loc 1 166 0
  97 001a 7047     		bx	lr
  98              	.L10:
  99              		.align	2
 100              	.L9:
 101 001c 10E000E0 		.word	-536813552
 102              		.cfi_endproc
 103              	.LFE122:
 105              		.section	.text.Sim800Read,"ax",%progbits
 106              		.align	2
 107              		.thumb
 108              		.thumb_func
 110              	Sim800Read:
 111              	.LFB126:
 167:./user/source/sim800.c **** 
 168:./user/source/sim800.c **** /********************************************************************
 169:./user/source/sim800.c **** * 功    能：vSim800SendCmd
 170:./user/source/sim800.c **** * 输    入：
 171:./user/source/sim800.c **** * 输    出：
 172:./user/source/sim800.c **** * 编 写 人：stragen
 173:./user/source/sim800.c **** * 编写日期：
 174:./user/source/sim800.c **** **********************************************************************/
 175:./user/source/sim800.c **** bool blSim800SendCmd(char *pcmd, char *pExpectAns, uint32_t delay, uint32_t retry)
 176:./user/source/sim800.c **** {
 177:./user/source/sim800.c ****     uint8_t buf[50];
 178:./user/source/sim800.c ****     uint8_t *ptr = NULL;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 6


 179:./user/source/sim800.c ****     uint8_t *pExpans = (uint8_t *)pExpectAns;
 180:./user/source/sim800.c ****     uint8_t ExpansLen = strlen(pExpectAns);
 181:./user/source/sim800.c ****     char *pRealAns = NULL;
 182:./user/source/sim800.c ****     uint32_t AnsLen = 0;
 183:./user/source/sim800.c ****     uint32_t timeout;
 184:./user/source/sim800.c ****     enum
 185:./user/source/sim800.c ****     {
 186:./user/source/sim800.c ****         Start,
 187:./user/source/sim800.c ****         End,
 188:./user/source/sim800.c ****         Compare
 189:./user/source/sim800.c ****     } AnsStatus;
 190:./user/source/sim800.c ****     AnsStatus = Start;
 191:./user/source/sim800.c ****     bool result = false;
 192:./user/source/sim800.c ****     do
 193:./user/source/sim800.c ****     {
 194:./user/source/sim800.c ****         if (pExpectAns == "")
 195:./user/source/sim800.c ****         {
 196:./user/source/sim800.c ****             Uart_OnceWrite(pSim800GPRS->Interface, (uint8_t *)pcmd, strlen(pcmd), TICKS_500MS);
 197:./user/source/sim800.c ****             AnsLen = Uart_OnceRead(pSim800GPRS->Interface, &buf[0], 50, delay);
 198:./user/source/sim800.c ****             buf[AnsLen] = '\0';
 199:./user/source/sim800.c ****             //pAns = (char *)buf;
 200:./user/source/sim800.c ****             if (0 == strcmp(pcmd, "AT+CSQ\r\n"))
 201:./user/source/sim800.c ****             {
 202:./user/source/sim800.c ****                 result = ((buf[9] - '0') * 10 + (buf[10] - '0') >= 16);
 203:./user/source/sim800.c ****             }
 204:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CGATT?\r\n"))
 205:./user/source/sim800.c ****             {
 206:./user/source/sim800.c ****                 result = ((buf[10] - '0') == 1);
 207:./user/source/sim800.c ****             }
 208:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CIFSR\r\n"))
 209:./user/source/sim800.c ****             {
 210:./user/source/sim800.c ****                 result = true;
 211:./user/source/sim800.c ****             }
 212:./user/source/sim800.c ****         }
 213:./user/source/sim800.c ****         else
 214:./user/source/sim800.c ****         {
 215:./user/source/sim800.c ****             timeout = delay;
 216:./user/source/sim800.c ****             memset(buf, 0, sizeof(buf));
 217:./user/source/sim800.c ****             ptr = &buf[0];
 218:./user/source/sim800.c ****             AnsLen = 0;
 219:./user/source/sim800.c ****             Uart_OnceWrite(pSim800GPRS->Interface, (uint8_t *)pcmd, strlen(pcmd), TICKS_500MS);
 220:./user/source/sim800.c ****             do
 221:./user/source/sim800.c ****             {
 222:./user/source/sim800.c ****                 if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 223:./user/source/sim800.c ****                 {
 224:./user/source/sim800.c ****                     timeout--;
 225:./user/source/sim800.c ****                 }
 226:./user/source/sim800.c ****                 switch (AnsStatus)
 227:./user/source/sim800.c ****                 {
 228:./user/source/sim800.c ****                 case Start:
 229:./user/source/sim800.c ****                 {
 230:./user/source/sim800.c ****                     if (Uart_Read(pSim800GPRS->Interface, ptr, 1) > 0)
 231:./user/source/sim800.c ****                     {
 232:./user/source/sim800.c ****                         if (*ptr == *pExpans)
 233:./user/source/sim800.c ****                         {
 234:./user/source/sim800.c ****                             pRealAns = ptr; //期待字符在buf中的首地址
 235:./user/source/sim800.c ****                             AnsLen++;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 7


 236:./user/source/sim800.c ****                             ptr++;
 237:./user/source/sim800.c ****                             AnsStatus = End;
 238:./user/source/sim800.c ****                         }
 239:./user/source/sim800.c ****                     }
 240:./user/source/sim800.c ****                     break;
 241:./user/source/sim800.c ****                 }
 242:./user/source/sim800.c ****                 case End:
 243:./user/source/sim800.c ****                 {
 244:./user/source/sim800.c ****                     if (Uart_Read(pSim800GPRS->Interface, ptr, 1) > 0)
 245:./user/source/sim800.c ****                     {
 246:./user/source/sim800.c ****                         ptr++;
 247:./user/source/sim800.c ****                         AnsLen++;
 248:./user/source/sim800.c ****                     }
 249:./user/source/sim800.c ****                     if (AnsLen >= ExpansLen)
 250:./user/source/sim800.c ****                     {
 251:./user/source/sim800.c ****                         AnsStatus = Compare;
 252:./user/source/sim800.c ****                     }
 253:./user/source/sim800.c ****                     break;
 254:./user/source/sim800.c ****                 }
 255:./user/source/sim800.c ****                 case Compare:
 256:./user/source/sim800.c ****                 {
 257:./user/source/sim800.c ****                     result = !bcmp(pExpectAns, pRealAns, ExpansLen);
 258:./user/source/sim800.c ****                     AnsStatus = Start;
 259:./user/source/sim800.c ****                     break;
 260:./user/source/sim800.c ****                 }
 261:./user/source/sim800.c ****                 }
 262:./user/source/sim800.c ****             } while (!result && timeout);
 263:./user/source/sim800.c ****         }
 264:./user/source/sim800.c ****     } while (!result && --retry);
 265:./user/source/sim800.c ****     return (result);
 266:./user/source/sim800.c **** }
 267:./user/source/sim800.c **** 
 268:./user/source/sim800.c **** #if 0
 269:./user/source/sim800.c ****         buf[readlen] = '\0';
 270:./user/source/sim800.c ****         pAns = (char *)buf;
 271:./user/source/sim800.c ****         if (pExpectAns == NULL)
 272:./user/source/sim800.c ****         {
 273:./user/source/sim800.c ****             if (0 == strcmp(pcmd, "AT+CSQ"))
 274:./user/source/sim800.c ****             {
 275:./user/source/sim800.c ****                 result = ((buf[8] - '0') * 10 + (buf[9] - '0') >= 16);
 276:./user/source/sim800.c ****             }
 277:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CGATT?"))
 278:./user/source/sim800.c ****             {
 279:./user/source/sim800.c ****                 result = ((buf[10] - '0') == 1);
 280:./user/source/sim800.c ****             }
 281:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CIFSR "))
 282:./user/source/sim800.c ****             {
 283:./user/source/sim800.c ****             }
 284:./user/source/sim800.c ****         }
 285:./user/source/sim800.c ****         else
 286:./user/source/sim800.c ****         {
 287:./user/source/sim800.c ****             pAns = strchr(pAns, *pExpectAns);
 288:./user/source/sim800.c ****             result = !bcmp(pExpectAns, pAns, strlen(pExpectAns));
 289:./user/source/sim800.c ****         }
 290:./user/source/sim800.c **** #endif
 291:./user/source/sim800.c **** #if 0
 292:./user/source/sim800.c ****     do
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 8


 293:./user/source/sim800.c ****     {
 294:./user/source/sim800.c ****         Uart_OnceWrite(pSim800GPRS->Interface, (uint8_t *)pcmd, strlen(pcmd), TICKS_500MS);
 295:./user/source/sim800.c ****         readlen = Uart_OnceRead(pSim800GPRS->Interface, &buf[0], 50, timeout);
 296:./user/source/sim800.c ****         buf[readlen] = '\0';
 297:./user/source/sim800.c ****         pAns = (char *)buf;
 298:./user/source/sim800.c ****         if (pExpectAns == NULL)
 299:./user/source/sim800.c ****         {
 300:./user/source/sim800.c ****             if (0 == strcmp(pcmd, "AT+CSQ"))
 301:./user/source/sim800.c ****             {
 302:./user/source/sim800.c ****                 result = ((buf[8] - '0') * 10 + (buf[9] - '0') >= 16);
 303:./user/source/sim800.c ****             }
 304:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CGATT?"))
 305:./user/source/sim800.c ****             {
 306:./user/source/sim800.c ****                 result = ((buf[10] - '0') == 1);
 307:./user/source/sim800.c ****             }
 308:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CIFSR "))
 309:./user/source/sim800.c ****             {
 310:./user/source/sim800.c ****             }
 311:./user/source/sim800.c ****         }
 312:./user/source/sim800.c ****         else
 313:./user/source/sim800.c ****         {
 314:./user/source/sim800.c ****             pAns = strchr(pAns, *pExpectAns);
 315:./user/source/sim800.c ****             result = !bcmp(pExpectAns, pAns, strlen(pExpectAns));
 316:./user/source/sim800.c ****         }
 317:./user/source/sim800.c ****         retry--;
 318:./user/source/sim800.c ****     } while (!result && retry);
 319:./user/source/sim800.c **** #endif
 320:./user/source/sim800.c **** /********************************************************************
 321:./user/source/sim800.c **** * 功    能：vSim800SendData
 322:./user/source/sim800.c **** * 输    入：
 323:./user/source/sim800.c **** * 输    出：
 324:./user/source/sim800.c **** * 编 写 人：stragen
 325:./user/source/sim800.c **** * 编写日期：
 326:./user/source/sim800.c **** **********************************************************************/
 327:./user/source/sim800.c **** uint32_t dwSim800SendData(uint8_t *pbuf, uint32_t len, uint32_t timeout)
 328:./user/source/sim800.c **** {
 329:./user/source/sim800.c ****     uint32_t sendlen;
 330:./user/source/sim800.c ****     uint32_t readlen;
 331:./user/source/sim800.c ****     uint8_t buf[20];
 332:./user/source/sim800.c ****     uint8_t *pAns = NULL;
 333:./user/source/sim800.c ****     char *pExpectAns = "OK";
 334:./user/source/sim800.c ****     bool result = false;
 335:./user/source/sim800.c ****     //pSim800GPRS->SendCmd("", "OK", 50000, 2);
 336:./user/source/sim800.c ****     //while (pSim800GPRS->Read(&rsvData, 1) == 'O')
 337:./user/source/sim800.c ****     sendlen = Uart_OnceWrite(pSim800GPRS->Interface, pbuf, len, TICKS_500MS);
 338:./user/source/sim800.c ****     readlen = Uart_OnceRead(pSim800GPRS->Interface, &buf[0], 11, timeout);
 339:./user/source/sim800.c ****     if (readlen == 11)
 340:./user/source/sim800.c ****     {
 341:./user/source/sim800.c ****         buf[readlen] = '\0';
 342:./user/source/sim800.c ****         pAns = (char *)buf;
 343:./user/source/sim800.c ****         pAns = strchr(pAns, *pExpectAns);
 344:./user/source/sim800.c ****         result = !bcmp(pExpectAns, pAns, strlen(pExpectAns));
 345:./user/source/sim800.c ****     }
 346:./user/source/sim800.c ****     if (result)
 347:./user/source/sim800.c ****         return sendlen;
 348:./user/source/sim800.c ****     else
 349:./user/source/sim800.c ****         return 0;
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 9


 350:./user/source/sim800.c **** }
 351:./user/source/sim800.c **** 
 352:./user/source/sim800.c **** /********************************************************************
 353:./user/source/sim800.c **** * 功    能：vSim800Send
 354:./user/source/sim800.c **** * 输    入：
 355:./user/source/sim800.c **** * 输    出：
 356:./user/source/sim800.c **** * 编 写 人：stragen
 357:./user/source/sim800.c **** * 编写日期：
 358:./user/source/sim800.c **** **********************************************************************/
 359:./user/source/sim800.c **** void vSim800AutoReadEn(void)
 360:./user/source/sim800.c **** {
 361:./user/source/sim800.c ****     USART_ITConfig(pSim800GPRS->Interface->handler, USART_IT_IDLE, ENABLE);
 362:./user/source/sim800.c **** }
 363:./user/source/sim800.c **** uint32_t Sim800Read(uint8_t *buf, uint32_t count)
 364:./user/source/sim800.c **** {
 112              		.loc 1 364 0
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 0
 115              		@ frame_needed = 0, uses_anonymous_args = 0
 116              	.LVL6:
 117 0000 08B5     		push	{r3, lr}
 118              	.LCFI0:
 119              		.cfi_def_cfa_offset 8
 120              		.cfi_offset 3, -8
 121              		.cfi_offset 14, -4
 365:./user/source/sim800.c ****     return Uart_Read(pSim800GPRS->Interface, buf, count);
 122              		.loc 1 365 0
 123 0002 044B     		ldr	r3, .L13
 124 0004 1B68     		ldr	r3, [r3]
 125 0006 0A46     		mov	r2, r1
 126 0008 0146     		mov	r1, r0
 127              	.LVL7:
 128 000a 1868     		ldr	r0, [r3]
 129              	.LVL8:
 130 000c FFF7FEFF 		bl	Uart_Read
 131              	.LVL9:
 366:./user/source/sim800.c **** }...
 132              		.loc 1 366 0
 133 0010 08BD     		pop	{r3, pc}
 134              	.L14:
 135 0012 00BF     		.align	2
 136              	.L13:
 137 0014 00000000 		.word	.LANCHOR0
 138              		.cfi_endproc
 139              	.LFE126:
 141              		.section	.text.vSim800AutoReadEn,"ax",%progbits
 142              		.align	2
 143              		.thumb
 144              		.thumb_func
 146              	vSim800AutoReadEn:
 147              	.LFB125:
 360:./user/source/sim800.c **** {
 148              		.loc 1 360 0
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 0
 151              		@ frame_needed = 0, uses_anonymous_args = 0
 152 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 10


 153              	.LCFI1:
 154              		.cfi_def_cfa_offset 8
 155              		.cfi_offset 3, -8
 156              		.cfi_offset 14, -4
 361:./user/source/sim800.c ****     USART_ITConfig(pSim800GPRS->Interface->handler, USART_IT_IDLE, ENABLE);
 157              		.loc 1 361 0
 158 0002 044B     		ldr	r3, .L17
 159 0004 1B68     		ldr	r3, [r3]
 160 0006 1B68     		ldr	r3, [r3]
 161 0008 0122     		movs	r2, #1
 162 000a 0349     		ldr	r1, .L17+4
 163 000c 1868     		ldr	r0, [r3]
 164 000e FFF7FEFF 		bl	USART_ITConfig
 165              	.LVL10:
 166 0012 08BD     		pop	{r3, pc}
 167              	.L18:
 168              		.align	2
 169              	.L17:
 170 0014 00000000 		.word	.LANCHOR0
 171 0018 04010400 		.word	262404
 172              		.cfi_endproc
 173              	.LFE125:
 175              		.section	.text.dwSim800SendData,"ax",%progbits
 176              		.align	2
 177              		.thumb
 178              		.thumb_func
 180              	dwSim800SendData:
 181              	.LFB124:
 328:./user/source/sim800.c **** {
 182              		.loc 1 328 0
 183              		.cfi_startproc
 184              		@ args = 0, pretend = 0, frame = 24
 185              		@ frame_needed = 0, uses_anonymous_args = 0
 186              	.LVL11:
 187 0000 70B5     		push	{r4, r5, r6, lr}
 188              	.LCFI2:
 189              		.cfi_def_cfa_offset 16
 190              		.cfi_offset 4, -16
 191              		.cfi_offset 5, -12
 192              		.cfi_offset 6, -8
 193              		.cfi_offset 14, -4
 194 0002 86B0     		sub	sp, sp, #24
 195              	.LCFI3:
 196              		.cfi_def_cfa_offset 40
 197 0004 1646     		mov	r6, r2
 198              	.LVL12:
 337:./user/source/sim800.c ****     sendlen = Uart_OnceWrite(pSim800GPRS->Interface, pbuf, len, TICKS_500MS);
 199              		.loc 1 337 0
 200 0006 144D     		ldr	r5, .L25
 201 0008 2C68     		ldr	r4, [r5]
 202 000a 0523     		movs	r3, #5
 203 000c 0A46     		mov	r2, r1
 204              	.LVL13:
 205 000e 0146     		mov	r1, r0
 206              	.LVL14:
 207 0010 2068     		ldr	r0, [r4]
 208              	.LVL15:
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 11


 209 0012 FFF7FEFF 		bl	Uart_OnceWrite
 210              	.LVL16:
 211 0016 0446     		mov	r4, r0
 212              	.LVL17:
 338:./user/source/sim800.c ****     readlen = Uart_OnceRead(pSim800GPRS->Interface, &buf[0], 11, timeout);
 213              		.loc 1 338 0
 214 0018 2868     		ldr	r0, [r5]
 215              	.LVL18:
 216 001a 3346     		mov	r3, r6
 217 001c 0B22     		movs	r2, #11
 218 001e 01A9     		add	r1, sp, #4
 219 0020 0068     		ldr	r0, [r0]
 220 0022 FFF7FEFF 		bl	Uart_OnceRead
 221              	.LVL19:
 339:./user/source/sim800.c ****     if (readlen == 11)
 222              		.loc 1 339 0
 223 0026 0B28     		cmp	r0, #11
 224 0028 11D1     		bne	.L22
 341:./user/source/sim800.c ****         buf[readlen] = '\0';
 225              		.loc 1 341 0
 226 002a 06AB     		add	r3, sp, #24
 227 002c 1844     		add	r0, r0, r3
 228              	.LVL20:
 229 002e 0023     		movs	r3, #0
 230 0030 00F8143C 		strb	r3, [r0, #-20]
 231              	.LVL21:
 343:./user/source/sim800.c ****         pAns = strchr(pAns, *pExpectAns);
 232              		.loc 1 343 0
 233 0034 4F21     		movs	r1, #79
 234 0036 01A8     		add	r0, sp, #4
 235              	.LVL22:
 236 0038 FFF7FEFF 		bl	strchr
 237              	.LVL23:
 344:./user/source/sim800.c ****         result = !bcmp(pExpectAns, pAns, strlen(pExpectAns));
 238              		.loc 1 344 0
 239 003c 0222     		movs	r2, #2
 240 003e 0146     		mov	r1, r0
 241 0040 0648     		ldr	r0, .L25+4
 242              	.LVL24:
 243 0042 FFF7FEFF 		bl	bcmp
 244              	.LVL25:
 245 0046 B0FA80F0 		clz	r0, r0
 246 004a 4009     		lsrs	r0, r0, #5
 247              	.LVL26:
 248 004c 00E0     		b	.L20
 249              	.LVL27:
 250              	.L22:
 334:./user/source/sim800.c ****     bool result = false;
 251              		.loc 1 334 0
 252 004e 0020     		movs	r0, #0
 253              	.LVL28:
 254              	.L20:
 346:./user/source/sim800.c ****     if (result)
 255              		.loc 1 346 0
 256 0050 00B1     		cbz	r0, .L21
 347:./user/source/sim800.c ****         return sendlen;
 257              		.loc 1 347 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 12


 258 0052 2046     		mov	r0, r4
 259              	.LVL29:
 260              	.L21:
 350:./user/source/sim800.c **** }
 261              		.loc 1 350 0
 262 0054 06B0     		add	sp, sp, #24
 263              	.LCFI4:
 264              		.cfi_def_cfa_offset 16
 265              		@ sp needed
 266 0056 70BD     		pop	{r4, r5, r6, pc}
 267              	.LVL30:
 268              	.L26:
 269              		.align	2
 270              	.L25:
 271 0058 00000000 		.word	.LANCHOR0
 272 005c 00000000 		.word	.LC0
 273              		.cfi_endproc
 274              	.LFE124:
 276              		.section	.text.blSim800SendCmd,"ax",%progbits
 277              		.align	2
 278              		.thumb
 279              		.thumb_func
 281              	blSim800SendCmd:
 282              	.LFB123:
 176:./user/source/sim800.c **** {
 283              		.loc 1 176 0
 284              		.cfi_startproc
 285              		@ args = 0, pretend = 0, frame = 72
 286              		@ frame_needed = 0, uses_anonymous_args = 0
 287              	.LVL31:
 288 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 289              	.LCFI5:
 290              		.cfi_def_cfa_offset 36
 291              		.cfi_offset 4, -36
 292              		.cfi_offset 5, -32
 293              		.cfi_offset 6, -28
 294              		.cfi_offset 7, -24
 295              		.cfi_offset 8, -20
 296              		.cfi_offset 9, -16
 297              		.cfi_offset 10, -12
 298              		.cfi_offset 11, -8
 299              		.cfi_offset 14, -4
 300 0004 93B0     		sub	sp, sp, #76
 301              	.LCFI6:
 302              		.cfi_def_cfa_offset 112
 303 0006 0290     		str	r0, [sp, #8]
 304 0008 8946     		mov	r9, r1
 305 000a 0392     		str	r2, [sp, #12]
 306 000c 9A46     		mov	r10, r3
 307              	.LVL32:
 180:./user/source/sim800.c ****     uint8_t ExpansLen = strlen(pExpectAns);
 308              		.loc 1 180 0
 309 000e 0846     		mov	r0, r1
 310              	.LVL33:
 311 0010 FFF7FEFF 		bl	strlen
 312              	.LVL34:
 313 0014 8346     		mov	fp, r0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 13


 314              	.LVL35:
 191:./user/source/sim800.c ****     bool result = false;
 315              		.loc 1 191 0
 316 0016 0026     		movs	r6, #0
 190:./user/source/sim800.c ****     AnsStatus = Start;
 317              		.loc 1 190 0
 318 0018 3446     		mov	r4, r6
 181:./user/source/sim800.c ****     char *pRealAns = NULL;
 319              		.loc 1 181 0
 320 001a 0196     		str	r6, [sp, #4]
 321              	.LVL36:
 322              	.L40:
 194:./user/source/sim800.c ****         if (pExpectAns == "")
 323              		.loc 1 194 0
 324 001c 504B     		ldr	r3, .L45
 325 001e 9945     		cmp	r9, r3
 326 0020 3FD1     		bne	.L28
 196:./user/source/sim800.c ****             Uart_OnceWrite(pSim800GPRS->Interface, (uint8_t *)pcmd, strlen(pcmd), TICKS_500MS);
 327              		.loc 1 196 0
 328 0022 504D     		ldr	r5, .L45+4
 329 0024 2F68     		ldr	r7, [r5]
 330 0026 DDF80880 		ldr	r8, [sp, #8]
 331 002a 4046     		mov	r0, r8
 332 002c FFF7FEFF 		bl	strlen
 333              	.LVL37:
 334 0030 0523     		movs	r3, #5
 335 0032 0246     		mov	r2, r0
 336 0034 4146     		mov	r1, r8
 337 0036 3868     		ldr	r0, [r7]
 338 0038 FFF7FEFF 		bl	Uart_OnceWrite
 339              	.LVL38:
 197:./user/source/sim800.c ****             AnsLen = Uart_OnceRead(pSim800GPRS->Interface, &buf[0], 50, delay);
 340              		.loc 1 197 0
 341 003c 2868     		ldr	r0, [r5]
 342 003e 039B     		ldr	r3, [sp, #12]
 343 0040 3222     		movs	r2, #50
 344 0042 05A9     		add	r1, sp, #20
 345 0044 0068     		ldr	r0, [r0]
 346 0046 FFF7FEFF 		bl	Uart_OnceRead
 347              	.LVL39:
 198:./user/source/sim800.c ****             buf[AnsLen] = '\0';
 348              		.loc 1 198 0
 349 004a 12AB     		add	r3, sp, #72
 350 004c 1844     		add	r0, r0, r3
 351              	.LVL40:
 352 004e 0023     		movs	r3, #0
 353 0050 00F8343C 		strb	r3, [r0, #-52]
 200:./user/source/sim800.c ****             if (0 == strcmp(pcmd, "AT+CSQ\r\n"))
 354              		.loc 1 200 0
 355 0054 4449     		ldr	r1, .L45+8
 356 0056 4046     		mov	r0, r8
 357 0058 FFF7FEFF 		bl	strcmp
 358              	.LVL41:
 359 005c 70B9     		cbnz	r0, .L29
 202:./user/source/sim800.c ****                 result = ((buf[9] - '0') * 10 + (buf[10] - '0') >= 16);
 360              		.loc 1 202 0
 361 005e 9DF81D30 		ldrb	r3, [sp, #29]	@ zero_extendqisi2
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 14


 362 0062 303B     		subs	r3, r3, #48
 363 0064 03EB8303 		add	r3, r3, r3, lsl #2
 364 0068 5E00     		lsls	r6, r3, #1
 365              	.LVL42:
 366 006a 9DF81E30 		ldrb	r3, [sp, #30]	@ zero_extendqisi2
 367 006e 303B     		subs	r3, r3, #48
 368 0070 1E44     		add	r6, r6, r3
 369 0072 0F2E     		cmp	r6, #15
 370 0074 D4BF     		ite	le
 371 0076 0026     		movle	r6, #0
 372 0078 0126     		movgt	r6, #1
 373              	.LVL43:
 374 007a 67E0     		b	.L30
 375              	.L29:
 204:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CGATT?\r\n"))
 376              		.loc 1 204 0
 377 007c 3B49     		ldr	r1, .L45+12
 378 007e 0298     		ldr	r0, [sp, #8]
 379 0080 FFF7FEFF 		bl	strcmp
 380              	.LVL44:
 381 0084 30B9     		cbnz	r0, .L31
 206:./user/source/sim800.c ****                 result = ((buf[10] - '0') == 1);
 382              		.loc 1 206 0
 383 0086 9DF81E60 		ldrb	r6, [sp, #30]	@ zero_extendqisi2
 384              	.LVL45:
 385 008a 312E     		cmp	r6, #49
 386 008c 14BF     		ite	ne
 387 008e 0026     		movne	r6, #0
 388 0090 0126     		moveq	r6, #1
 389              	.LVL46:
 390 0092 5BE0     		b	.L30
 391              	.L31:
 208:./user/source/sim800.c ****             else if (0 == strcmp(pcmd, "AT+CIFSR\r\n"))
 392              		.loc 1 208 0
 393 0094 3649     		ldr	r1, .L45+16
 394 0096 0298     		ldr	r0, [sp, #8]
 395 0098 FFF7FEFF 		bl	strcmp
 396              	.LVL47:
 397 009c 0028     		cmp	r0, #0
 398 009e 54D0     		beq	.L41
 399 00a0 54E0     		b	.L30
 400              	.L28:
 401              	.LVL48:
 216:./user/source/sim800.c ****             memset(buf, 0, sizeof(buf));
 402              		.loc 1 216 0
 403 00a2 3222     		movs	r2, #50
 404 00a4 0021     		movs	r1, #0
 405 00a6 05A8     		add	r0, sp, #20
 406 00a8 FFF7FEFF 		bl	memset
 407              	.LVL49:
 219:./user/source/sim800.c ****             Uart_OnceWrite(pSim800GPRS->Interface, (uint8_t *)pcmd, strlen(pcmd), TICKS_500MS);
 408              		.loc 1 219 0
 409 00ac 2D4B     		ldr	r3, .L45+4
 410 00ae 1D68     		ldr	r5, [r3]
 411 00b0 029F     		ldr	r7, [sp, #8]
 412 00b2 3846     		mov	r0, r7
 413 00b4 FFF7FEFF 		bl	strlen
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 15


 414              	.LVL50:
 415 00b8 0523     		movs	r3, #5
 416 00ba 0246     		mov	r2, r0
 417 00bc 3946     		mov	r1, r7
 418 00be 2868     		ldr	r0, [r5]
 419 00c0 FFF7FEFF 		bl	Uart_OnceWrite
 420              	.LVL51:
 215:./user/source/sim800.c ****             timeout = delay;
 421              		.loc 1 215 0
 422 00c4 039D     		ldr	r5, [sp, #12]
 218:./user/source/sim800.c ****             AnsLen = 0;
 423              		.loc 1 218 0
 424 00c6 4FF00008 		mov	r8, #0
 217:./user/source/sim800.c ****             ptr = &buf[0];
 425              		.loc 1 217 0
 426 00ca 05AF     		add	r7, sp, #20
 427              	.LVL52:
 428              	.L38:
 222:./user/source/sim800.c ****                 if ((SysTick->CTRL & SysTick_CTRL_COUNTFLAG_Msk) != 0U)
 429              		.loc 1 222 0
 430 00cc 294B     		ldr	r3, .L45+20
 431 00ce 1B68     		ldr	r3, [r3]
 432 00d0 13F4803F 		tst	r3, #65536
 433 00d4 00D0     		beq	.L32
 224:./user/source/sim800.c ****                     timeout--;
 434              		.loc 1 224 0
 435 00d6 013D     		subs	r5, r5, #1
 436              	.LVL53:
 437              	.L32:
 226:./user/source/sim800.c ****                 switch (AnsStatus)
 438              		.loc 1 226 0
 439 00d8 012C     		cmp	r4, #1
 440 00da 16D0     		beq	.L34
 441 00dc 14B1     		cbz	r4, .L35
 442 00de 022C     		cmp	r4, #2
 443 00e0 23D0     		beq	.L36
 444 00e2 2EE0     		b	.L33
 445              	.L35:
 230:./user/source/sim800.c ****                     if (Uart_Read(pSim800GPRS->Interface, ptr, 1) > 0)
 446              		.loc 1 230 0
 447 00e4 1F4B     		ldr	r3, .L45+4
 448 00e6 1B68     		ldr	r3, [r3]
 449 00e8 0122     		movs	r2, #1
 450 00ea 3946     		mov	r1, r7
 451 00ec 1868     		ldr	r0, [r3]
 452 00ee FFF7FEFF 		bl	Uart_Read
 453              	.LVL54:
 454 00f2 30B3     		cbz	r0, .L33
 232:./user/source/sim800.c ****                         if (*ptr == *pExpans)
 455              		.loc 1 232 0
 456 00f4 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 457 00f6 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 458 00fa 9A42     		cmp	r2, r3
 459 00fc 21D1     		bne	.L33
 460              	.LVL55:
 235:./user/source/sim800.c ****                             AnsLen++;
 461              		.loc 1 235 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 16


 462 00fe 08F10108 		add	r8, r8, #1
 463              	.LVL56:
 234:./user/source/sim800.c ****                             pRealAns = ptr; //期待字符在buf中的首地址
 464              		.loc 1 234 0
 465 0102 0197     		str	r7, [sp, #4]
 236:./user/source/sim800.c ****                             ptr++;
 466              		.loc 1 236 0
 467 0104 0137     		adds	r7, r7, #1
 468              	.LVL57:
 237:./user/source/sim800.c ****                             AnsStatus = End;
 469              		.loc 1 237 0
 470 0106 0124     		movs	r4, #1
 471 0108 1BE0     		b	.L33
 472              	.LVL58:
 473              	.L34:
 244:./user/source/sim800.c ****                     if (Uart_Read(pSim800GPRS->Interface, ptr, 1) > 0)
 474              		.loc 1 244 0
 475 010a 164B     		ldr	r3, .L45+4
 476 010c 1B68     		ldr	r3, [r3]
 477 010e 0122     		movs	r2, #1
 478 0110 3946     		mov	r1, r7
 479 0112 1868     		ldr	r0, [r3]
 480 0114 FFF7FEFF 		bl	Uart_Read
 481              	.LVL59:
 482 0118 10B1     		cbz	r0, .L37
 246:./user/source/sim800.c ****                         ptr++;
 483              		.loc 1 246 0
 484 011a 0137     		adds	r7, r7, #1
 485              	.LVL60:
 247:./user/source/sim800.c ****                         AnsLen++;
 486              		.loc 1 247 0
 487 011c 08F10108 		add	r8, r8, #1
 488              	.LVL61:
 489              	.L37:
 249:./user/source/sim800.c ****                     if (AnsLen >= ExpansLen)
 490              		.loc 1 249 0
 491 0120 5FFA8BF3 		uxtb	r3, fp
 492 0124 9845     		cmp	r8, r3
 493 0126 0BD2     		bcs	.L42
 494 0128 0BE0     		b	.L33
 495              	.L36:
 257:./user/source/sim800.c ****                     result = !bcmp(pExpectAns, pRealAns, ExpansLen);
 496              		.loc 1 257 0
 497 012a 5FFA8BF2 		uxtb	r2, fp
 498 012e 0199     		ldr	r1, [sp, #4]
 499 0130 4846     		mov	r0, r9
 500 0132 FFF7FEFF 		bl	bcmp
 501              	.LVL62:
 502 0136 B0FA80F6 		clz	r6, r0
 503              	.LVL63:
 504 013a 7609     		lsrs	r6, r6, #5
 505              	.LVL64:
 258:./user/source/sim800.c ****                     AnsStatus = Start;
 506              		.loc 1 258 0
 507 013c 0024     		movs	r4, #0
 259:./user/source/sim800.c ****                     break;
 508              		.loc 1 259 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 17


 509 013e 00E0     		b	.L33
 510              	.LVL65:
 511              	.L42:
 251:./user/source/sim800.c ****                         AnsStatus = Compare;
 512              		.loc 1 251 0
 513 0140 0224     		movs	r4, #2
 514              	.LVL66:
 515              	.L33:
 262:./user/source/sim800.c ****             } while (!result && timeout);
 516              		.loc 1 262 0
 517 0142 1EB9     		cbnz	r6, .L30
 262:./user/source/sim800.c ****             } while (!result && timeout);
 518              		.loc 1 262 0 is_stmt 0 discriminator 1
 519 0144 002D     		cmp	r5, #0
 520 0146 C1D1     		bne	.L38
 521 0148 00E0     		b	.L30
 522              	.LVL67:
 523              	.L41:
 210:./user/source/sim800.c ****                 result = true;
 524              		.loc 1 210 0 is_stmt 1
 525 014a 0126     		movs	r6, #1
 526              	.LVL68:
 527              	.L30:
 264:./user/source/sim800.c ****     } while (!result && --retry);
 528              		.loc 1 264 0
 529 014c 1EB9     		cbnz	r6, .L39
 530              	.LVL69:
 264:./user/source/sim800.c ****     } while (!result && --retry);
 531              		.loc 1 264 0 is_stmt 0 discriminator 1
 532 014e BAF1010A 		subs	r10, r10, #1
 533              	.LVL70:
 534 0152 7FF463AF 		bne	.L40
 535              	.L39:
 266:./user/source/sim800.c **** }
 536              		.loc 1 266 0 is_stmt 1
 537 0156 3046     		mov	r0, r6
 538 0158 13B0     		add	sp, sp, #76
 539              	.LCFI7:
 540              		.cfi_def_cfa_offset 36
 541              		@ sp needed
 542 015a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 543              	.LVL71:
 544              	.L46:
 545 015e 00BF     		.align	2
 546              	.L45:
 547 0160 04000000 		.word	.LC1
 548 0164 00000000 		.word	.LANCHOR0
 549 0168 08000000 		.word	.LC2
 550 016c 14000000 		.word	.LC3
 551 0170 20000000 		.word	.LC4
 552 0174 10E000E0 		.word	-536813552
 553              		.cfi_endproc
 554              	.LFE123:
 556              		.section	.text.vSim800_OnOff,"ax",%progbits
 557              		.align	2
 558              		.thumb
 559              		.thumb_func
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 18


 561              	vSim800_OnOff:
 562              	.LFB118:
  95:./user/source/sim800.c **** {
 563              		.loc 1 95 0
 564              		.cfi_startproc
 565              		@ args = 0, pretend = 0, frame = 0
 566              		@ frame_needed = 0, uses_anonymous_args = 0
 567 0000 08B5     		push	{r3, lr}
 568              	.LCFI8:
 569              		.cfi_def_cfa_offset 8
 570              		.cfi_offset 3, -8
 571              		.cfi_offset 14, -4
  97:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_RESET);
 572              		.loc 1 97 0
 573 0002 0022     		movs	r2, #0
 574 0004 0821     		movs	r1, #8
 575 0006 4FF09040 		mov	r0, #1207959552
 576 000a FFF7FEFF 		bl	GPIO_WriteBit
 577              	.LVL72:
  98:./user/source/sim800.c ****     vDelay(TICKS_500MS);
 578              		.loc 1 98 0
 579 000e 0520     		movs	r0, #5
 580 0010 FFF7FEFF 		bl	vDelay
 581              	.LVL73:
 100:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_SET);
 582              		.loc 1 100 0
 583 0014 0122     		movs	r2, #1
 584 0016 0821     		movs	r1, #8
 585 0018 4FF09040 		mov	r0, #1207959552
 586 001c FFF7FEFF 		bl	GPIO_WriteBit
 587              	.LVL74:
 102:./user/source/sim800.c ****     vDelay(TICKS_1S);
 588              		.loc 1 102 0
 589 0020 0A20     		movs	r0, #10
 590 0022 FFF7FEFF 		bl	vDelay
 591              	.LVL75:
 104:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_3, Bit_RESET);
 592              		.loc 1 104 0
 593 0026 0022     		movs	r2, #0
 594 0028 0821     		movs	r1, #8
 595 002a 4FF09040 		mov	r0, #1207959552
 596 002e FFF7FEFF 		bl	GPIO_WriteBit
 597              	.LVL76:
 598 0032 08BD     		pop	{r3, pc}
 599              		.cfi_endproc
 600              	.LFE118:
 602              		.section	.text.vSim800_PDen,"ax",%progbits
 603              		.align	2
 604              		.thumb
 605              		.thumb_func
 607              	vSim800_PDen:
 608              	.LFB120:
 126:./user/source/sim800.c **** {
 609              		.loc 1 126 0
 610              		.cfi_startproc
 611              		@ args = 0, pretend = 0, frame = 0
 612              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 19


 613 0000 08B5     		push	{r3, lr}
 614              	.LCFI9:
 615              		.cfi_def_cfa_offset 8
 616              		.cfi_offset 3, -8
 617              		.cfi_offset 14, -4
 127:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_1, Bit_RESET);
 618              		.loc 1 127 0
 619 0002 0022     		movs	r2, #0
 620 0004 0221     		movs	r1, #2
 621 0006 4FF09040 		mov	r0, #1207959552
 622 000a FFF7FEFF 		bl	GPIO_WriteBit
 623              	.LVL77:
 624 000e 08BD     		pop	{r3, pc}
 625              		.cfi_endproc
 626              	.LFE120:
 628              		.section	.text.vSim800_pEn,"ax",%progbits
 629              		.align	2
 630              		.thumb
 631              		.thumb_func
 633              	vSim800_pEn:
 634              	.LFB119:
 115:./user/source/sim800.c **** {
 635              		.loc 1 115 0
 636              		.cfi_startproc
 637              		@ args = 0, pretend = 0, frame = 0
 638              		@ frame_needed = 0, uses_anonymous_args = 0
 639 0000 08B5     		push	{r3, lr}
 640              	.LCFI10:
 641              		.cfi_def_cfa_offset 8
 642              		.cfi_offset 3, -8
 643              		.cfi_offset 14, -4
 116:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_1, Bit_SET);
 644              		.loc 1 116 0
 645 0002 0122     		movs	r2, #1
 646 0004 0221     		movs	r1, #2
 647 0006 4FF09040 		mov	r0, #1207959552
 648 000a FFF7FEFF 		bl	GPIO_WriteBit
 649              	.LVL78:
 650 000e 08BD     		pop	{r3, pc}
 651              		.cfi_endproc
 652              	.LFE119:
 654              		.section	.text.vSim800_HardInit,"ax",%progbits
 655              		.align	2
 656              		.thumb
 657              		.thumb_func
 659              	vSim800_HardInit:
 660              	.LFB116:
  29:./user/source/sim800.c **** {
 661              		.loc 1 29 0
 662              		.cfi_startproc
 663              		@ args = 0, pretend = 0, frame = 40
 664              		@ frame_needed = 0, uses_anonymous_args = 0
 665 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 666              	.LCFI11:
 667              		.cfi_def_cfa_offset 20
 668              		.cfi_offset 4, -20
 669              		.cfi_offset 5, -16
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 20


 670              		.cfi_offset 6, -12
 671              		.cfi_offset 7, -8
 672              		.cfi_offset 14, -4
 673 0002 8BB0     		sub	sp, sp, #44
 674              	.LCFI12:
 675              		.cfi_def_cfa_offset 64
  34:./user/source/sim800.c ****     RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOA, ENABLE);
 676              		.loc 1 34 0
 677 0004 0121     		movs	r1, #1
 678 0006 4FF40030 		mov	r0, #131072
 679 000a FFF7FEFF 		bl	RCC_AHBPeriphClockCmd
 680              	.LVL79:
  35:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_3;
 681              		.loc 1 35 0
 682 000e 0A21     		movs	r1, #10
 683 0010 0891     		str	r1, [sp, #32]
  36:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Mode = GPIO_Mode_OUT;
 684              		.loc 1 36 0
 685 0012 0125     		movs	r5, #1
 686 0014 8DF82450 		strb	r5, [sp, #36]
  37:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_OType = GPIO_OType_PP; //开漏
 687              		.loc 1 37 0
 688 0018 0024     		movs	r4, #0
 689 001a 8DF82640 		strb	r4, [sp, #38]
  39:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Speed = GPIO_Speed_2MHz;
 690              		.loc 1 39 0
 691 001e 0227     		movs	r7, #2
 692 0020 8DF82570 		strb	r7, [sp, #37]
  40:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_NOPULL;
 693              		.loc 1 40 0
 694 0024 8DF82740 		strb	r4, [sp, #39]
  41:./user/source/sim800.c ****     GPIO_WriteBit(GPIOA, GPIO_Pin_1 | GPIO_Pin_3, Bit_RESET); //默认为低
 695              		.loc 1 41 0
 696 0028 2246     		mov	r2, r4
 697 002a 4FF09040 		mov	r0, #1207959552
 698 002e FFF7FEFF 		bl	GPIO_WriteBit
 699              	.LVL80:
  42:./user/source/sim800.c ****     GPIO_Init(GPIOA, &GPIO_Initstruc);
 700              		.loc 1 42 0
 701 0032 08A9     		add	r1, sp, #32
 702 0034 4FF09040 		mov	r0, #1207959552
 703 0038 FFF7FEFF 		bl	GPIO_Init
 704              	.LVL81:
  44:./user/source/sim800.c ****     GPIO_PinAFConfig(GPIOB, GPIO_PinSource8, GPIO_AF_7);
 705              		.loc 1 44 0
 706 003c 204E     		ldr	r6, .L55
 707 003e 0722     		movs	r2, #7
 708 0040 0821     		movs	r1, #8
 709 0042 3046     		mov	r0, r6
 710 0044 FFF7FEFF 		bl	GPIO_PinAFConfig
 711              	.LVL82:
  45:./user/source/sim800.c ****     GPIO_PinAFConfig(GPIOB, GPIO_PinSource9, GPIO_AF_7);
 712              		.loc 1 45 0
 713 0048 0722     		movs	r2, #7
 714 004a 0921     		movs	r1, #9
 715 004c 3046     		mov	r0, r6
 716 004e FFF7FEFF 		bl	GPIO_PinAFConfig
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 21


 717              	.LVL83:
  46:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Mode = GPIO_Mode_AF;
 718              		.loc 1 46 0
 719 0052 8DF82470 		strb	r7, [sp, #36]
  47:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_OType = GPIO_OType_PP;
 720              		.loc 1 47 0
 721 0056 8DF82640 		strb	r4, [sp, #38]
  48:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_PuPd = GPIO_PuPd_UP;
 722              		.loc 1 48 0
 723 005a 8DF82750 		strb	r5, [sp, #39]
  50:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Speed = GPIO_Speed_10MHz;
 724              		.loc 1 50 0
 725 005e 8DF82550 		strb	r5, [sp, #37]
  51:./user/source/sim800.c ****     GPIO_Initstruc.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9;
 726              		.loc 1 51 0
 727 0062 4FF44073 		mov	r3, #768
 728 0066 0893     		str	r3, [sp, #32]
  52:./user/source/sim800.c ****     GPIO_Init(GPIOB, &GPIO_Initstruc);
 729              		.loc 1 52 0
 730 0068 08A9     		add	r1, sp, #32
 731 006a 3046     		mov	r0, r6
 732 006c FFF7FEFF 		bl	GPIO_Init
 733              	.LVL84:
  54:./user/source/sim800.c ****     RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
 734              		.loc 1 54 0
 735 0070 2946     		mov	r1, r5
 736 0072 4FF48020 		mov	r0, #262144
 737 0076 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 738              	.LVL85:
  55:./user/source/sim800.c ****     USART_OverSampling8Cmd(USART3, ENABLE);
 739              		.loc 1 55 0
 740 007a 124E     		ldr	r6, .L55+4
 741 007c 2946     		mov	r1, r5
 742 007e 3046     		mov	r0, r6
 743 0080 FFF7FEFF 		bl	USART_OverSampling8Cmd
 744              	.LVL86:
  56:./user/source/sim800.c ****     USART_Initstruc.USART_BaudRate = 115200;
 745              		.loc 1 56 0
 746 0084 4FF4E133 		mov	r3, #115200
 747 0088 0293     		str	r3, [sp, #8]
  57:./user/source/sim800.c ****     USART_Initstruc.USART_Mode = (USART_Mode_Rx | USART_Mode_Tx);
 748              		.loc 1 57 0
 749 008a 0C23     		movs	r3, #12
 750 008c 0693     		str	r3, [sp, #24]
  58:./user/source/sim800.c ****     USART_Initstruc.USART_WordLength = USART_WordLength_8b;
 751              		.loc 1 58 0
 752 008e 0394     		str	r4, [sp, #12]
  59:./user/source/sim800.c ****     USART_Initstruc.USART_Parity = USART_Parity_No;
 753              		.loc 1 59 0
 754 0090 0594     		str	r4, [sp, #20]
  60:./user/source/sim800.c ****     USART_Initstruc.USART_StopBits = USART_StopBits_1;
 755              		.loc 1 60 0
 756 0092 0494     		str	r4, [sp, #16]
  61:./user/source/sim800.c ****     USART_Initstruc.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 757              		.loc 1 61 0
 758 0094 0794     		str	r4, [sp, #28]
  62:./user/source/sim800.c ****     USART_Init(USART3, &USART_Initstruc);
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 22


 759              		.loc 1 62 0
 760 0096 02A9     		add	r1, sp, #8
 761 0098 3046     		mov	r0, r6
 762 009a FFF7FEFF 		bl	USART_Init
 763              	.LVL87:
  64:./user/source/sim800.c ****     NVIC_Initstruc.NVIC_IRQChannel = USART3_IRQn;
 764              		.loc 1 64 0
 765 009e 2723     		movs	r3, #39
 766 00a0 8DF80430 		strb	r3, [sp, #4]
  66:./user/source/sim800.c ****     NVIC_Initstruc.NVIC_IRQChannelPreemptionPriority = configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY
 767              		.loc 1 66 0
 768 00a4 0623     		movs	r3, #6
 769 00a6 8DF80530 		strb	r3, [sp, #5]
  68:./user/source/sim800.c ****     NVIC_Init(&NVIC_Initstruc);
 770              		.loc 1 68 0
 771 00aa 01A8     		add	r0, sp, #4
 772 00ac FFF7FEFF 		bl	NVIC_Init
 773              	.LVL88:
  69:./user/source/sim800.c ****     USART_Cmd(USART3, ENABLE);
 774              		.loc 1 69 0
 775 00b0 2946     		mov	r1, r5
 776 00b2 3046     		mov	r0, r6
 777 00b4 FFF7FEFF 		bl	USART_Cmd
 778              	.LVL89:
  71:./user/source/sim800.c ****     vSysTickInit();
 779              		.loc 1 71 0
 780 00b8 FFF7FEFF 		bl	vSysTickInit
 781              	.LVL90:
  72:./user/source/sim800.c **** }
 782              		.loc 1 72 0
 783 00bc 0BB0     		add	sp, sp, #44
 784              	.LCFI13:
 785              		.cfi_def_cfa_offset 20
 786              		@ sp needed
 787 00be F0BD     		pop	{r4, r5, r6, r7, pc}
 788              	.L56:
 789              		.align	2
 790              	.L55:
 791 00c0 00040048 		.word	1207960576
 792 00c4 00480040 		.word	1073760256
 793              		.cfi_endproc
 794              	.LFE116:
 796              		.section	.text.vSim800GPRSInit,"ax",%progbits
 797              		.align	2
 798              		.global	vSim800GPRSInit
 799              		.thumb
 800              		.thumb_func
 802              	vSim800GPRSInit:
 803              	.LFB117:
  81:./user/source/sim800.c **** {
 804              		.loc 1 81 0
 805              		.cfi_startproc
 806              		@ args = 0, pretend = 0, frame = 0
 807              		@ frame_needed = 0, uses_anonymous_args = 0
 808              	.LVL91:
 809 0000 10B5     		push	{r4, lr}
 810              	.LCFI14:
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 23


 811              		.cfi_def_cfa_offset 8
 812              		.cfi_offset 4, -8
 813              		.cfi_offset 14, -4
 814 0002 0446     		mov	r4, r0
  82:./user/source/sim800.c ****     vSim800_HardInit();
 815              		.loc 1 82 0
 816 0004 FFF7FEFF 		bl	vSim800_HardInit
 817              	.LVL92:
  83:./user/source/sim800.c ****     pGPRS->Interface = pUartGPRS;
 818              		.loc 1 83 0
 819 0008 094B     		ldr	r3, .L59
 820 000a 1B68     		ldr	r3, [r3]
 821 000c 2360     		str	r3, [r4]
  85:./user/source/sim800.c ****     pGPRS->PowerEn = vSim800_pEn;
 822              		.loc 1 85 0
 823 000e 094B     		ldr	r3, .L59+4
 824 0010 A360     		str	r3, [r4, #8]
  86:./user/source/sim800.c ****     pGPRS->PowerDen = vSim800_PDen;
 825              		.loc 1 86 0
 826 0012 094B     		ldr	r3, .L59+8
 827 0014 E360     		str	r3, [r4, #12]
  87:./user/source/sim800.c ****     pGPRS->OnOff = vSim800_OnOff;
 828              		.loc 1 87 0
 829 0016 094B     		ldr	r3, .L59+12
 830 0018 6360     		str	r3, [r4, #4]
  88:./user/source/sim800.c ****     pGPRS->SendCmd = blSim800SendCmd;
 831              		.loc 1 88 0
 832 001a 094B     		ldr	r3, .L59+16
 833 001c 2361     		str	r3, [r4, #16]
  89:./user/source/sim800.c ****     pGPRS->SendData = dwSim800SendData;
 834              		.loc 1 89 0
 835 001e 094B     		ldr	r3, .L59+20
 836 0020 6361     		str	r3, [r4, #20]
  90:./user/source/sim800.c ****     pGPRS->AutoReadEn = vSim800AutoReadEn;
 837              		.loc 1 90 0
 838 0022 094B     		ldr	r3, .L59+24
 839 0024 A361     		str	r3, [r4, #24]
  91:./user/source/sim800.c ****     pGPRS->Read = Sim800Read;
 840              		.loc 1 91 0
 841 0026 094B     		ldr	r3, .L59+28
 842 0028 E361     		str	r3, [r4, #28]
  92:./user/source/sim800.c ****     pGPRS->delay = vDelay;
 843              		.loc 1 92 0
 844 002a 094B     		ldr	r3, .L59+32
 845 002c 2362     		str	r3, [r4, #32]
 846 002e 10BD     		pop	{r4, pc}
 847              	.LVL93:
 848              	.L60:
 849              		.align	2
 850              	.L59:
 851 0030 00000000 		.word	pUartGPRS
 852 0034 00000000 		.word	vSim800_pEn
 853 0038 00000000 		.word	vSim800_PDen
 854 003c 00000000 		.word	vSim800_OnOff
 855 0040 00000000 		.word	blSim800SendCmd
 856 0044 00000000 		.word	dwSim800SendData
 857 0048 00000000 		.word	vSim800AutoReadEn
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 24


 858 004c 00000000 		.word	Sim800Read
 859 0050 00000000 		.word	vDelay
 860              		.cfi_endproc
 861              	.LFE117:
 863              		.global	pSim800GPRS
 864              		.comm	Sim800GPRS,36,4
 865              		.section	.rodata.str1.4,"aMS",%progbits,1
 866              		.align	2
 867              	.LC0:
 868 0000 4F4B00   		.ascii	"OK\000"
 869 0003 00       		.space	1
 870              	.LC1:
 871 0004 00       		.ascii	"\000"
 872 0005 000000   		.space	3
 873              	.LC2:
 874 0008 41542B43 		.ascii	"AT+CSQ\015\012\000"
 874      53510D0A 
 874      00
 875 0011 000000   		.space	3
 876              	.LC3:
 877 0014 41542B43 		.ascii	"AT+CGATT?\015\012\000"
 877      47415454 
 877      3F0D0A00 
 878              	.LC4:
 879 0020 41542B43 		.ascii	"AT+CIFSR\015\012\000"
 879      49465352 
 879      0D0A00
 880              		.section	.data.pSim800GPRS,"aw",%progbits
 881              		.align	2
 882              		.set	.LANCHOR0,. + 0
 885              	pSim800GPRS:
 886 0000 00000000 		.word	Sim800GPRS
 887              		.text
 888              	.Letext0:
 889              		.file 2 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\machine\\_defaul
 890              		.file 3 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\sys\\_stdint.h"
 891              		.file 4 "cmsis/include/core_cm4.h"
 892              		.file 5 "cmsis/include/stm32f37x.h"
 893              		.file 6 "stdperiph/include/stm32f37x_gpio.h"
 894              		.file 7 "stdperiph/include/stm32f37x_usart.h"
 895              		.file 8 "stdperiph/include/stm32f37x_misc.h"
 896              		.file 9 "user/include/uart.h"
 897              		.file 10 "freertos/Source/portable/GCC/ARM_CM4_MPU/portmacro.h"
 898              		.file 11 "user/include/sim800.h"
 899              		.file 12 "user/include/FreeRTOSConfig.h"
 900              		.file 13 "d:\\gcc-arm-none-eabi-5_4-2016q3-20160926-win32\\arm-none-eabi\\include\\string.h"
 901              		.file 14 "stdperiph/include/stm32f37x_rcc.h"
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 25


DEFINED SYMBOLS
                            *ABS*:00000000 sim800.c
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:22     .text.vSysTickInit:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:26     .text.vSysTickInit:00000000 vSysTickInit
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:57     .text.vSysTickInit:00000020 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:64     .text.vDelay:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:68     .text.vDelay:00000000 vDelay
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:101    .text.vDelay:0000001c $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:106    .text.Sim800Read:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:110    .text.Sim800Read:00000000 Sim800Read
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:137    .text.Sim800Read:00000014 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:142    .text.vSim800AutoReadEn:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:146    .text.vSim800AutoReadEn:00000000 vSim800AutoReadEn
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:170    .text.vSim800AutoReadEn:00000014 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:176    .text.dwSim800SendData:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:180    .text.dwSim800SendData:00000000 dwSim800SendData
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:271    .text.dwSim800SendData:00000058 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:277    .text.blSim800SendCmd:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:281    .text.blSim800SendCmd:00000000 blSim800SendCmd
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:547    .text.blSim800SendCmd:00000160 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:557    .text.vSim800_OnOff:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:561    .text.vSim800_OnOff:00000000 vSim800_OnOff
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:603    .text.vSim800_PDen:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:607    .text.vSim800_PDen:00000000 vSim800_PDen
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:629    .text.vSim800_pEn:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:633    .text.vSim800_pEn:00000000 vSim800_pEn
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:655    .text.vSim800_HardInit:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:659    .text.vSim800_HardInit:00000000 vSim800_HardInit
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:791    .text.vSim800_HardInit:000000c0 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:797    .text.vSim800GPRSInit:00000000 $t
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:802    .text.vSim800GPRSInit:00000000 vSim800GPRSInit
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:851    .text.vSim800GPRSInit:00000030 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:885    .data.pSim800GPRS:00000000 pSim800GPRS
                            *COM*:00000024 Sim800GPRS
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:866    .rodata.str1.4:00000000 $d
C:\Users\strag\AppData\Local\Temp\cceROoCq.s:881    .data.pSim800GPRS:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
SystemCoreClock
Uart_Read
USART_ITConfig
Uart_OnceWrite
Uart_OnceRead
strchr
bcmp
strlen
strcmp
memset
GPIO_WriteBit
RCC_AHBPeriphClockCmd
GPIO_Init
GPIO_PinAFConfig
RCC_APB1PeriphClockCmd
USART_OverSampling8Cmd
USART_Init
NVIC_Init
ARM GAS  C:\Users\strag\AppData\Local\Temp\cceROoCq.s 			page 26


USART_Cmd
pUartGPRS
